<!--
  Generated template for the SearchPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar class="moppina-navbar">
    <ion-title>Search</ion-title>
  </ion-navbar>
  <ion-toolbar>
      <ion-input class="search-input" type="text"
      (enter)="search($event)" (keyboardStateChange)="onKeyboardStateChange($event)"
      [keyboardColor]="'mh-blue'"
      keyboard></ion-input>
  </ion-toolbar>
</ion-header>


<ion-content>
<div *ngIf="resultsVisible">
  <div *ngFor="let result of results">
    <div *ngIf="result.artists || result.albums || result.tracks">
      <h3 ion-text color="mh-blue">{{ result.title }}</h3>
      <ion-item-group *ngIf="result.artists.length > 0">
        <ion-item-divider color="mh-dark-blue">Artists</ion-item-divider>
        <button ion-item *ngFor="let artist of result.artists" (click)="browseArtist(artist)">
            <ion-spinner item-start name="bubbles" style="zoom: 1.5" color="mh-dark-blue" *ngIf="loadingArts && !artist.albumArt"></ion-spinner>
            <ion-icon item-start *ngIf="!artist.albumArt && !loadingArts" name="musical-notes" style="zoom: 1.5" color="mh-dark-blue"></ion-icon>
            <ion-thumbnail item-start *ngIf="artist.albumArt">
                <img [src]="artist.albumArt">
              </ion-thumbnail>
            <h2 ion-text color="mh-blue">{{ artist.name }}</h2>
            <!-- <button ion-button outline item-end color="mh-blue" *ngIf="ref.type != 'directory'" large (click)="showOptions(ref); $event.stopPropagation();"><ion-icon name="cog"></ion-icon></button> -->
          </button>
      </ion-item-group>
      <ion-item-group *ngIf="result.albums.length > 0">
          <ion-item-divider color="mh-dark-blue">Albums</ion-item-divider>
          <button ion-item *ngFor="let album of result.albums" (click)="browseAlbum(album)">
              <ion-spinner item-start name="bubbles" style="zoom: 1.5" color="mh-dark-blue" *ngIf="loadingArts && !album.albumArt"></ion-spinner>
              <ion-icon item-start *ngIf="!album.albumArt && !loadingArts" name="musical-notes" style="zoom: 1.5" color="mh-dark-blue"></ion-icon>
              <ion-thumbnail item-start *ngIf="album.albumArt">
                  <img [src]="album.albumArt">
                </ion-thumbnail>
              <h2 ion-text color="mh-blue">{{ album.name }}</h2>
              <!-- <button ion-button outline item-end color="mh-blue" *ngIf="ref.type != 'directory'" large (click)="showOptions(ref); $event.stopPropagation();"><ion-icon name="cog"></ion-icon></button> -->
            </button>
        </ion-item-group>
    </div>
  </div>
</div>
</ion-content>
