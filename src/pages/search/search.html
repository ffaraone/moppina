<!--
  Generated template for the SearchPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar class="mop-navbar">
    <ion-title>Search {{ query }}</ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="showPopover($event)">
        <ion-icon name="search"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content>
  <div *ngIf="results">
    <div *ngFor="let result of results">
      <div *ngIf="result.artists || result.albums || result.tracks">
        <h3 ion-text color="primary">{{ result.title }}</h3>
        <ion-item-group *ngIf="result.artists && result.artists.length > 0">
          <ion-item-divider color="primary-dark">Artists</ion-item-divider>
          <button ion-item *ngFor="let artist of result.artists" (click)="browseArtist(artist)">
            <ion-spinner item-start name="bubbles" class="mop-results-icon" color="primary-dark" *ngIf="loadingArts && !artist.albumArt"></ion-spinner>
            <ion-icon item-start *ngIf="!artist.albumArt && !loadingArts" name="musical-notes" class="mop-results-icon" color="primary-dark"></ion-icon>
            <ion-thumbnail item-start *ngIf="artist.albumArt">
              <img [src]="artist.albumArt">
            </ion-thumbnail>
            <h2 ion-text color="primary">{{ artist.name }}</h2>
            <!-- <button ion-button outline item-end color="primary" *ngIf="ref.type != 'directory'" large (click)="showOptions(ref); $event.stopPropagation();"><ion-icon name="cog"></ion-icon></button> -->
          </button>
        </ion-item-group>
        <ion-item-group *ngIf="result.albums && result.albums.length > 0">
          <ion-item-divider color="primary-dark">Albums</ion-item-divider>
          <button ion-item *ngFor="let album of result.albums" (click)="browseAlbum(album)">
            <ion-spinner item-start name="bubbles" class="mop-results-icon" color="primary-dark" *ngIf="loadingArts && !album.albumArt"></ion-spinner>
            <ion-icon item-start *ngIf="!album.albumArt && !loadingArts" name="musical-notes" class="mop-results-icon" color="primary-dark"></ion-icon>
            <ion-thumbnail item-start *ngIf="album.albumArt">
              <img [src]="album.albumArt">
            </ion-thumbnail>
            <h2 ion-text color="primary">{{ album.name }}</h2>
            <!-- <button ion-button outline item-end color="primary" *ngIf="ref.type != 'directory'" large (click)="showOptions(ref); $event.stopPropagation();"><ion-icon name="cog"></ion-icon></button> -->
          </button>
        </ion-item-group>
        <ion-item-group *ngIf="result.tracks && result.tracks.length > 0">
          <ion-item-divider color="primary-dark">Tracks</ion-item-divider>
          <button ion-item *ngFor="let track of result.tracks" (click)="browseTrack(track)">
            <ion-spinner item-start name="bubbles" class="mop-results-icon" color="primary-dark" *ngIf="loadingArts && !track.albumArt"></ion-spinner>
            <ion-icon item-start *ngIf="!track.albumArt && !loadingArts" name="musical-notes" class="mop-results-icon" color="primary-dark"></ion-icon>
            <ion-thumbnail item-start *ngIf="track.albumArt">
              <img [src]="track.albumArt">
            </ion-thumbnail>
            <h2 ion-text color="primary">{{ track.name }}</h2>
            <!-- <button ion-button outline item-end color="primary" *ngIf="ref.type != 'directory'" large (click)="showOptions(ref); $event.stopPropagation();"><ion-icon name="cog"></ion-icon></button> -->
          </button>
        </ion-item-group>
      </div>
    </div>
  </div>
</ion-content>